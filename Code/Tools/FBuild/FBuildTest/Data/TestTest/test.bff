//
// Test
//
// Build and run a Test
//
//------------------------------------------------------------------------------

// Use the standard test environment
//------------------------------------------------------------------------------
#include "../testcommon.bff"
Using( .StandardEnvironment )
Settings {}

// Compile an executable to run
//------------------------------------------------------------------------------
ObjectList( "Exe-Lib" )
{
    .CompilerInputFiles = 'Data/TestTest/test.cpp'
    .CompilerOutputPath = '$Out$/Test/Test/'
}

Executable( "Exe" )
{
    #if __WINDOWS__
        .LinkerOptions      + ' /SUBSYSTEM:CONSOLE'
                            + ' /ENTRY:main'
    #endif
    .LinkerOutput       = '$Out$/Test/Test/test.exe'
    .Libraries          = { 'Exe-Lib' }
}

// Run the executable we compiled
//------------------------------------------------------------------------------
Test( "Test" )
{
    .TestExecutable     = 'Exe'
    .TestOutput         = '$Out$/Test/Test/testoutput.txt'
}
